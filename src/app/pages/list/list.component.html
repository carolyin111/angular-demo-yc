@if (isLoading()) {
  <div class="loading-spinner">
    <div class="spinner"></div>
  </div>
}

<div class="data-list-container">
  <h1>臺北市社會住宅興建工程進度</h1>

  <div class="form-wrapper">
    <form class="search-form">
      <!-- <div class="form-field">
        <label for="distict">行政區</label>
        <input
          name="distict"
          type="text"
          [(ngModel)]="distict"
          placeholder=""
        />
      </div> -->
      <div class="form-field">
        <label for="progress">興建進度</label>
        <select name="progress" [(ngModel)]="progress">
          @for (progress of ProgressTypes; track progress) {
            <option [value]="progress">{{ progress }}</option>
          }
        </select>
      </div>
    </form>
    <!-- <button class="yc-btn" (click)="filter()">查詢</button> -->
  </div>

  <div class="table-wrapper">
    <table class="data-list-table">
      <thead>
        <tr>
          <th>行政區</th>
          <th>社宅名稱</th>
          <th>地址</th>
          <th>規劃戶數</th>
          <th>興建進度</th>
          <th>我的最愛</th>
        </tr>
      </thead>
      <tbody>
        @for (item of filterData(); track item; let i = $index) {
          <tr>
            <td>{{ item.distict }}</td>
            <td>{{ item.name }}</td>
            <td>{{ item.address }}</td>
            <td>{{ item.houseHolds }}</td>
            <td>{{ item.progress }}</td>
            <td>
              <input
                class="yc-checkbox"
                type="checkbox"
                [checked]="item.isFavorite"
                (change)="toggleFavorite(item)"
              />
            </td>
          </tr>
        } @empty {
          <div>There are no items.</div>
        }
      </tbody>
    </table>
  </div>

  <div class="pagination">
    <button (click)="prevPage()">上一頁</button>
    <div class="page-info">
      <span>第 {{ currentPage() }} 頁</span>
    </div>
    <button (click)="nextPage()">下一頁</button>
  </div>
</div>
